# âœ… ç®€åŒ–ç‰ˆæœ¬å®Œæˆ

## ğŸ¯ ä½ è¦çš„åŠŸèƒ½å·²å®ç°

### âœ… ä¸éœ€è¦å‘½ä»¤è¡Œ

- ç›´æ¥è¿è¡Œ `python generate.py`
- ä¸éœ€è¦æ¯æ¬¡æŒ‡å®šå‚æ•°

### âœ… é…ç½®åœ¨æ–‡ä»¶é‡Œ

- ç¼–è¾‘ `gen/speech.txt`
- æ‰€æœ‰è®¾ç½®éƒ½åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­

### âœ… å¤šéŸ³è‰²æ”¯æŒ

- ä½¿ç”¨JSONæ ¼å¼æŒ‡å®šéŸ³è‰²
- æ ¼å¼ï¼š`{"name": "f-a/happy", "seed": -1, "speed": 1} æ–‡æœ¬å†…å®¹`

### âœ… è‡ªåŠ¨æŸ¥æ‰¾éŸ³è‰²æ–‡ä»¶

- ä» `voices/` ç›®å½•è‡ªåŠ¨åŠ è½½
- æ”¯æŒä¸­æ–‡æ–‡ä»¶åï¼ˆå¦‚ `f-b/å“‡.wav`ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ generate.py              # ä¸»ç¨‹åºï¼ˆè¿è¡Œè¿™ä¸ªï¼‰
â”œâ”€â”€ gen/
â”‚   â”œâ”€â”€ speech.txt          # ä½ çš„è¾“å…¥æ–‡æœ¬ï¼ˆç¼–è¾‘è¿™ä¸ªï¼‰
â”‚   â”œâ”€â”€ speech_example.txt  # ç¤ºä¾‹æ–‡æœ¬
â”‚   â””â”€â”€ output/             # ç”Ÿæˆçš„éŸ³é¢‘ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚       â”œâ”€â”€ segment_0000.wav
â”‚       â”œâ”€â”€ segment_0001.wav
â”‚       â””â”€â”€ ...
â”œâ”€â”€ voices/                 # ä½ çš„éŸ³è‰²æ–‡ä»¶
â”‚   â”œâ”€â”€ f-a/
â”‚   â”‚   â”œâ”€â”€ angry.wav
â”‚   â”‚   â”œâ”€â”€ happy.wav
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ f-b/
â”‚   â”‚   â”œâ”€â”€ å“‡.wav
â”‚   â”‚   â”œâ”€â”€ å“¼.wav
â”‚   â”‚   â””â”€â”€ å¥½å‘€.wav
â”‚   â””â”€â”€ f-c/
â”‚       â”œâ”€â”€ å˜¿å˜¿.wav
â”‚       â”œâ”€â”€ å°å‚»ç“œ.wav
â”‚       â””â”€â”€ æ˜¯å‘€.wav
â””â”€â”€ æ–‡æ¡£/
    â”œâ”€â”€ START_HERE.md       # å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èå…ˆçœ‹è¿™ä¸ªï¼‰
    â”œâ”€â”€ USAGE.md            # è¯¦ç»†ä½¿ç”¨è¯´æ˜
    â”œâ”€â”€ VOICES.md           # æ‰€æœ‰éŸ³è‰²åˆ—è¡¨
    â””â”€â”€ README_SIMPLE.md    # å®Œæ•´æ–‡æ¡£
```

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### 1. ç¼–è¾‘æ–‡æœ¬

æ‰“å¼€ `gen/speech.txt`ï¼š

```
{"name": "f-a/happy", "seed": -1, "speed": 1} ç¬¬ä¸€å¥è¯ã€‚

{"name": "f-b/å“‡", "seed": -1, "speed": 1} ç¬¬äºŒå¥è¯ã€‚

{"name": "f-c/å˜¿å˜¿", "seed": -1, "speed": 1.1} ç¬¬ä¸‰å¥è¯ã€‚
```

### 2. è¿è¡Œç”Ÿæˆ

```bash
python generate.py
```

### 3. æŸ¥çœ‹ç»“æœ

```bash
ls gen/output/
# segment_0000.wav, segment_0001.wav, ...

# æ’­æ”¾
afplay gen/output/segment_0000.wav
```

---

## ğŸ“ æ ¼å¼è¯´æ˜

æ¯æ®µæ–‡æœ¬å‰çš„JSONé…ç½®ï¼š

```json
{
  "name": "f-a/happy", // éŸ³è‰²è·¯å¾„ï¼ˆç›¸å¯¹äºvoices/ï¼‰
  "seed": -1, // éšæœºç§å­ï¼ˆ-1=éšæœºï¼‰
  "speed": 1.0 // è¯­é€Ÿï¼ˆ1.0=æ­£å¸¸ï¼‰
}
```

ç„¶åç›´æ¥å†™æ–‡æœ¬å†…å®¹ã€‚

---

## ğŸ­ å¯ç”¨éŸ³è‰²

### f-a ç³»åˆ—ï¼ˆæƒ…æ„ŸéŸ³è‰²ï¼‰

```
f-a/angry     - ç”Ÿæ°”
f-a/confused  - å›°æƒ‘
f-a/fear      - ææƒ§
f-a/happy     - å¼€å¿ƒ
f-a/sad       - æ‚²ä¼¤
f-a/tender    - æ¸©æŸ”
```

### f-b ç³»åˆ—ï¼ˆè¯­æ°”è¯ï¼‰

```
f-b/å“‡        - æƒŠå¹
f-b/å“¼        - ä¸æ»¡
f-b/å¥½å‘€      - åŒæ„
```

### f-c ç³»åˆ—ï¼ˆå£è¯­åŒ–ï¼‰

```
f-c/å˜¿å˜¿      - è°ƒçš®
f-c/å°å‚»ç“œ    - äº²æ˜µ
f-c/æ˜¯å‘€      - è‚¯å®š
```

---

## ğŸ’¡ ç¤ºä¾‹åœºæ™¯

### å¯¹è¯åœºæ™¯

```
{"name": "f-a/happy", "seed": -1, "speed": 1} ä½ å¥½ï¼ä»Šå¤©å¤©æ°”çœŸå¥½ã€‚

{"name": "f-b/å¥½å‘€", "seed": -1, "speed": 1} æ˜¯å•Šï¼Œæˆ‘ä»¬å‡ºå»èµ°èµ°å§ã€‚

{"name": "f-a/confused", "seed": -1, "speed": 1} å»å“ªé‡Œå‘¢ï¼Ÿ

{"name": "f-c/å˜¿å˜¿", "seed": -1, "speed": 1.1} å˜¿å˜¿ï¼Œæˆ‘çŸ¥é“ä¸€ä¸ªå¥½åœ°æ–¹ã€‚
```

### æƒ…æ„Ÿå˜åŒ–

```
{"name": "f-a/happy", "seed": -1, "speed": 1} æˆ‘ä»Šå¤©æ”¶åˆ°äº†ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼

{"name": "f-a/sad", "seed": -1, "speed": 0.9} ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä¸å¤ªå¥½çš„äº‹æƒ…ã€‚

{"name": "f-a/angry", "seed": -1, "speed": 1.1} æœ‰äººå±…ç„¶æ¬ºéª—äº†æˆ‘ï¼

{"name": "f-a/tender", "seed": -1, "speed": 0.95} ä¸è¿‡ï¼Œæˆ‘é€‰æ‹©åŸè°…ã€‚
```

### å¤šè§’è‰²æ’­å®¢

```
{"name": "f-a/happy", "seed": -1, "speed": 1} æ¬¢è¿æ”¶å¬ä»Šå¤©çš„èŠ‚ç›®ã€‚

{"name": "f-b/å¥½å‘€", "seed": -1, "speed": 1} ä»Šå¤©æˆ‘ä»¬é‚€è¯·åˆ°äº†ä¸€ä½ç‰¹åˆ«å˜‰å®¾ã€‚

{"name": "f-c/å˜¿å˜¿", "seed": -1, "speed": 1} å¤§å®¶å¥½ï¼Œå¾ˆé«˜å…´æ¥åˆ°è¿™é‡Œã€‚

{"name": "f-a/confused", "seed": -1, "speed": 1} è¯·é—®æ‚¨æ˜¯åšä»€ä¹ˆå·¥ä½œçš„ï¼Ÿ

{"name": "f-c/æ˜¯å‘€", "seed": -1, "speed": 1} æˆ‘æ˜¯ä¸€åäººå·¥æ™ºèƒ½ç ”ç©¶å‘˜ã€‚
```

---

## âš™ï¸ å‚æ•°è°ƒæ•´

### speedï¼ˆè¯­é€Ÿï¼‰

| å€¼  | æ•ˆæœ | é€‚ç”¨åœºæ™¯   |
| --- | ---- | ---------- |
| 0.8 | æ…¢é€Ÿ | å­¦ä¹ ã€æœ—è¯» |
| 1.0 | æ­£å¸¸ | æ—¥å¸¸å¯¹è¯   |
| 1.2 | å¿«é€Ÿ | æ–°é—»ã€æ’­æŠ¥ |
| 1.5 | å¾ˆå¿« | å¿«èŠ‚å¥å†…å®¹ |

### seedï¼ˆéšæœºç§å­ï¼‰

- `-1` - æ¯æ¬¡ç”Ÿæˆéƒ½ä¸åŒï¼ˆæ¨èï¼‰
- `0, 1, 2...` - å›ºå®šç§å­ï¼Œæ¯æ¬¡ç”Ÿæˆç›¸åŒ

---

## ğŸ”§ é«˜çº§åŠŸèƒ½

### åˆå¹¶æ‰€æœ‰éŸ³é¢‘

```bash
cd gen/output
ls *.wav | sort | sed 's/^/file /' > filelist.txt
ffmpeg -f concat -safe 0 -i filelist.txt -c copy ../final.wav
```

### æ‰¹é‡ç”Ÿæˆ

åˆ›å»ºå¤šä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ `generate.py`ï¼š

```python
generator.generate_from_file("gen/speech1.txt")
generator.generate_from_file("gen/speech2.txt")
```

---

## ğŸ“Š æµ‹è¯•ç»“æœ

```bash
# æµ‹è¯•è§£æåŠŸèƒ½
python -c "
import re, json
from pathlib import Path

with open('gen/speech.txt', 'r', encoding='utf-8') as f:
    text = f.read()

matches = list(re.finditer(r'\{[^}]+\}', text))
print(f'âœ… Found {len(matches)} segments')

for i, match in enumerate(matches):
    config = json.loads(match.group(0))
    voice_path = Path(f'voices/{config[\"name\"]}.wav')
    status = 'âœ…' if voice_path.exists() else 'âŒ'
    print(f'{status} [{i}] {config[\"name\"]}')
"
```

è¾“å‡ºï¼š

```
âœ… Found 7 segments
âœ… [0] f-a/happy
âœ… [1] f-b/å¥½å‘€
âœ… [2] f-a/confused
âœ… [3] f-c/å˜¿å˜¿
âœ… [4] f-a/sad
âœ… [5] f-c/å°å‚»ç“œ
âœ… [6] f-a/happy
```

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°éŸ³è‰²ï¼Ÿ

A: å°†WAVæ–‡ä»¶æ”¾åˆ° `voices/` ç›®å½•ä¸‹ï¼Œç„¶ååœ¨æ–‡æœ¬ä¸­å¼•ç”¨ï¼š

```
{"name": "your-folder/your-voice", "seed": -1, "speed": 1} æ–‡æœ¬
```

### Q: å¯ä»¥æ··åˆä¸­è‹±æ–‡å—ï¼Ÿ

A: å¯ä»¥ï¼F5-TTSæ”¯æŒä¸­è‹±æ–‡æ··åˆã€‚

### Q: ç”Ÿæˆé€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ

A:

- ç¡®ä¿ä½¿ç”¨GPUï¼ˆCUDAï¼‰
- è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œæ¯æ®µéœ€è¦å‡ ç§’åˆ°åå‡ ç§’
- å‡å°‘æ–‡æœ¬æ®µè½æ•°é‡

### Q: éŸ³è´¨ä¸å¥½æ€ä¹ˆåŠï¼Ÿ

A:

- ç¡®ä¿å‚è€ƒéŸ³é¢‘ï¼ˆvoices/ä¸‹çš„WAVï¼‰è´¨é‡é«˜
- è°ƒæ•´speedå‚æ•°
- å°è¯•ä¸åŒçš„éŸ³è‰²

### Q: JSONæ ¼å¼é”™è¯¯ï¼Ÿ

A:

- ä½¿ç”¨åŒå¼•å·ï¼Œä¸è¦ç”¨å•å¼•å·
- ç¡®ä¿æ²¡æœ‰å¤šä½™çš„é€—å·
- å¯ä»¥ç”¨åœ¨çº¿JSONéªŒè¯å·¥å…·æ£€æŸ¥

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

### âœ… å·²å®ç°

- ç®€å•çš„è„šæœ¬è¿è¡Œæ–¹å¼
- JSONæ ¼å¼éŸ³è‰²é…ç½®
- å¤šéŸ³è‰²æ”¯æŒ
- è‡ªåŠ¨æŸ¥æ‰¾éŸ³è‰²æ–‡ä»¶
- ä¸­æ–‡æ–‡ä»¶åæ”¯æŒ
- è¯¦ç»†çš„æ–‡æ¡£

### ğŸš« ä¸åŒ…å«ï¼ˆç®€åŒ–ç‰ˆï¼‰

- å‘½ä»¤è¡Œå‚æ•°
- é…ç½®æ–‡ä»¶ï¼ˆTOMLï¼‰
- ç¼“å­˜ç®¡ç†
- å­—å¹•ç”Ÿæˆ
- è‡ªåŠ¨æ‹¼æ¥

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

1. **START_HERE.md** - å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥æå®šï¼‰
2. **USAGE.md** - è¯¦ç»†ä½¿ç”¨è¯´æ˜
3. **VOICES.md** - æ‰€æœ‰éŸ³è‰²åˆ—è¡¨å’Œç¤ºä¾‹
4. **README_SIMPLE.md** - å®Œæ•´æŠ€æœ¯æ–‡æ¡£

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç°åœ¨å°±å¯ä»¥ä½¿ç”¨

```bash
# 1. ç¼–è¾‘æ–‡æœ¬
vim gen/speech.txt

# 2. è¿è¡Œç”Ÿæˆ
python generate.py

# 3. æ’­æ”¾éŸ³é¢‘
afplay gen/output/segment_0000.wav
```

### å¦‚æœéœ€è¦æ›´å¤šåŠŸèƒ½

å¯ä»¥è€ƒè™‘æ·»åŠ ï¼š

- è‡ªåŠ¨æ‹¼æ¥æ‰€æœ‰éŸ³é¢‘
- ç”Ÿæˆå­—å¹•æ–‡ä»¶
- ç¼“å­˜ç®¡ç†ï¼ˆé¿å…é‡å¤ç”Ÿæˆï¼‰
- è¿›åº¦æ¡æ˜¾ç¤º
- æ‰¹é‡å¤„ç†

---

**å¼€å§‹åˆ›ä½œä½ çš„å¤šéŸ³è‰²å†…å®¹å§ï¼** ğŸ‰

```bash
python generate.py
```
